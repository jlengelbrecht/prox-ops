---
apiVersion: v1
kind: Namespace
metadata:
  name: mcp
  labels:
    # Pod Security Standards - enforce baseline (downgraded from restricted)
    # Reason: graphiti-mcp requires initContainer as root to copy uv binary from /root/.local/bin
    # to a shared volume. Main containers still run as non-root (uid 1000).
    # Security mitigated by: strict NetworkPolicy (only LiteLLM ingress), dropped capabilities,
    # seccomp profiles, no privilege escalation. Upgrade to restricted when upstream fixes image.
    pod-security.kubernetes.io/enforce: baseline
    pod-security.kubernetes.io/enforce-version: latest
    pod-security.kubernetes.io/warn: restricted
    pod-security.kubernetes.io/warn-version: latest
    pod-security.kubernetes.io/audit: restricted
    pod-security.kubernetes.io/audit-version: latest
  annotations:
    # Namespace purpose documentation
    security.homelab/purpose: "MCP (Model Context Protocol) servers for AI tool integration"
    security.homelab/network: "Restricted - only LiteLLM gateway can access MCP servers"
    security.homelab/gateway: "LiteLLM in ai namespace is the sole ingress point"
