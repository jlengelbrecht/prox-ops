---
# ToolHive Registry Server Configuration
apiVersion: v1
kind: ConfigMap
metadata:
  name: toolhive-registry-config
  namespace: mcp
data:
  config.yaml: |
    # Registry Server Configuration
    registryName: homelab

    # Registry sources - Kubernetes discovery for local MCP servers
    # Note: Official MCP Registry disabled due to data quality issues (duplicates, broken URLs)
    # Registry now runs in mcp namespace alongside MCPServers for automatic discovery
    registries:
      # Kubernetes discovery - watches MCPServers in same namespace
      - name: kubernetes
        format: toolhive
        kubernetes: {}
        syncPolicy:
          interval: 5m

    # Authentication - start with anonymous, add OIDC later
    # TODO: Configure OIDC with Authentik in future story
    auth:
      mode: anonymous

    # Database configuration - uses environment variable
    # DATABASE_URL is injected from secret
