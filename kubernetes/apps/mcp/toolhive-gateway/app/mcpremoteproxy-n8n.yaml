---
# MCPRemoteProxy for n8n MCP server
# Provides workflow automation and n8n node/template access
# Named with -proxy suffix to avoid conflict with n8n-mcp Deployment
apiVersion: toolhive.stacklok.dev/v1alpha1
kind: MCPRemoteProxy
metadata:
  name: n8n-proxy
  namespace: mcp
  annotations:
    toolhive.stacklok.dev/registry-export: "true"
  labels:
    app.kubernetes.io/name: n8n-proxy
    app.kubernetes.io/component: mcp-proxy
    app.kubernetes.io/part-of: toolhive-gateway
    toolhive.stacklok.dev/group: homelab-mcp
spec:
  remoteURL: http://n8n-mcp.mcp.svc.cluster.local:3000
  # OIDC disabled - Kubernetes OIDC validation fails due to CA trust issues
  # TODO: Configure proper OIDC auth in future story
  audit:
    enabled: true
