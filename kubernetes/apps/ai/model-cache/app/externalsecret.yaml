---
# ExternalSecret for HuggingFace Access Token
# Required for downloading gated models (e.g., meta-llama/Llama-3.1-8B-Instruct)
#
# Setup Instructions:
# 1. Create HuggingFace User Access Token: https://huggingface.co/settings/tokens
#    - Token type: Read (sufficient for model downloads)
#    - Name: "prox-ops-cluster-model-cache"
# 2. Accept Meta Llama 3.1 Community License: https://huggingface.co/meta-llama/Llama-3.1-8B-Instruct
# 3. Store token in 1Password:
#    - Vault: Automation
#    - Item: HUGGINGFACE_TOKEN
#    - Field: token
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: huggingface-token
  namespace: ai
spec:
  refreshInterval: 24h
  secretStoreRef:
    kind: ClusterSecretStore
    name: onepassword-connect
  target:
    name: huggingface-token
    template:
      engineVersion: v2
      data:
        HF_TOKEN: "{{ .token }}"
  dataFrom:
    - extract:
        key: HUGGINGFACE_TOKEN
