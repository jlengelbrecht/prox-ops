---
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: media

components:
  - ../../components/sops

resources:
  - ./namespace.yaml
  - ./plex/storage/ks.yaml  # Storage with prune: false - MUST come before plex
  - ./plex/ks.yaml
  - ./arr-storage/ks.yaml  # Shared NFS storage for arr-stack apps
  - ./prowlarr/ks.yaml     # Indexer manager (VPN sidecar for privacy)
  - ./sonarr/ks.yaml       # TV show management
  - ./radarr/ks.yaml       # Movie management
  - ./tetragon-policies/ks.yaml
