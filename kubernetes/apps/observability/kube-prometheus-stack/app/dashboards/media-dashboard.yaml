---
# Comprehensive Media Stack Dashboard
# Monitors Plex, Sonarr, Radarr, Prowlarr, qBittorrent, SABnzbd, Cleanuparr, Huntarr, Maintainerr, Wizarr
# Note: Cleanuparr, Huntarr, Maintainerr, and Wizarr show pod status only (no Prometheus metrics available)
apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-dashboard-media
  namespace: observability
  labels:
    grafana_dashboard: "1"
    grafana_folder: "Applications"
data:
  media-stack.json: |-
    {
      "annotations": {
        "list": [
          {
            "datasource": "Prometheus",
            "enable": true,
            "expr": "ALERTS{namespace=~\"media|downloads\",alertstate=\"firing\"}",
            "iconColor": "red",
            "name": "Media Alerts",
            "tagKeys": "alertname,severity,namespace",
            "textFormat": "{{ alertname }}: {{ annotations.description }}",
            "titleFormat": "Media Alert"
          }
        ]
      },
      "description": "Comprehensive media stack monitoring - Plex, *arr apps, downloaders, automation tools, VPN status. Note: Cleanuparr, Huntarr, Maintainerr, Wizarr show pod status only (no metrics exporters available).",
      "editable": true,
      "fiscalYearStartMonth": 0,
      "graphTooltip": 1,
      "links": [],
      "panels": [
        {
          "collapsed": false,
          "gridPos": {"h": 1, "w": 24, "x": 0, "y": 0},
          "id": 100,
          "panels": [],
          "title": "Overview - App Status",
          "type": "row"
        },
        {
          "datasource": "Prometheus",
          "description": "Plex pod status",
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "thresholds"},
              "mappings": [
                {"options": {"0": {"color": "red", "index": 1, "text": "Down"}}, "type": "value"},
                {"options": {"1": {"color": "green", "index": 0, "text": "Running"}}, "type": "value"}
              ],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {"color": "red", "value": null},
                  {"color": "green", "value": 1}
                ]
              }
            }
          },
          "gridPos": {"h": 3, "w": 4, "x": 0, "y": 1},
          "id": 1,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "value"},
          "targets": [{"expr": "max(kube_pod_status_phase{namespace=\"media\",pod=~\"plex.*\",phase=\"Running\"})", "legendFormat": "Plex", "refId": "A"}],
          "title": "Plex",
          "type": "stat"
        },
        {
          "datasource": "Prometheus",
          "description": "Sonarr pod status",
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "thresholds"},
              "mappings": [
                {"options": {"0": {"color": "red", "index": 1, "text": "Down"}}, "type": "value"},
                {"options": {"1": {"color": "green", "index": 0, "text": "Running"}}, "type": "value"}
              ],
              "thresholds": {"mode": "absolute", "steps": [{"color": "red", "value": null}, {"color": "green", "value": 1}]}
            }
          },
          "gridPos": {"h": 3, "w": 4, "x": 4, "y": 1},
          "id": 2,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "value"},
          "targets": [{"expr": "max(kube_pod_status_phase{namespace=\"media\",pod=~\"sonarr.*\",phase=\"Running\"})", "legendFormat": "Sonarr", "refId": "A"}],
          "title": "Sonarr",
          "type": "stat"
        },
        {
          "datasource": "Prometheus",
          "description": "Radarr pod status",
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "thresholds"},
              "mappings": [
                {"options": {"0": {"color": "red", "index": 1, "text": "Down"}}, "type": "value"},
                {"options": {"1": {"color": "green", "index": 0, "text": "Running"}}, "type": "value"}
              ],
              "thresholds": {"mode": "absolute", "steps": [{"color": "red", "value": null}, {"color": "green", "value": 1}]}
            }
          },
          "gridPos": {"h": 3, "w": 4, "x": 8, "y": 1},
          "id": 3,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "value"},
          "targets": [{"expr": "max(kube_pod_status_phase{namespace=\"media\",pod=~\"radarr.*\",phase=\"Running\"})", "legendFormat": "Radarr", "refId": "A"}],
          "title": "Radarr",
          "type": "stat"
        },
        {
          "datasource": "Prometheus",
          "description": "Prowlarr pod status",
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "thresholds"},
              "mappings": [
                {"options": {"0": {"color": "red", "index": 1, "text": "Down"}}, "type": "value"},
                {"options": {"1": {"color": "green", "index": 0, "text": "Running"}}, "type": "value"}
              ],
              "thresholds": {"mode": "absolute", "steps": [{"color": "red", "value": null}, {"color": "green", "value": 1}]}
            }
          },
          "gridPos": {"h": 3, "w": 4, "x": 12, "y": 1},
          "id": 4,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "value"},
          "targets": [{"expr": "max(kube_pod_status_phase{namespace=\"media\",pod=~\"prowlarr.*\",phase=\"Running\"})", "legendFormat": "Prowlarr", "refId": "A"}],
          "title": "Prowlarr",
          "type": "stat"
        },
        {
          "datasource": "Prometheus",
          "description": "qBittorrent pod status",
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "thresholds"},
              "mappings": [
                {"options": {"0": {"color": "red", "index": 1, "text": "Down"}}, "type": "value"},
                {"options": {"1": {"color": "green", "index": 0, "text": "Running"}}, "type": "value"}
              ],
              "thresholds": {"mode": "absolute", "steps": [{"color": "red", "value": null}, {"color": "green", "value": 1}]}
            }
          },
          "gridPos": {"h": 3, "w": 4, "x": 16, "y": 1},
          "id": 5,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "value"},
          "targets": [{"expr": "max(kube_pod_status_phase{namespace=\"downloads\",pod=~\"qbittorrent.*\",phase=\"Running\"})", "legendFormat": "qBittorrent", "refId": "A"}],
          "title": "qBittorrent",
          "type": "stat"
        },
        {
          "datasource": "Prometheus",
          "description": "SABnzbd pod status",
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "thresholds"},
              "mappings": [
                {"options": {"0": {"color": "red", "index": 1, "text": "Down"}}, "type": "value"},
                {"options": {"1": {"color": "green", "index": 0, "text": "Running"}}, "type": "value"}
              ],
              "thresholds": {"mode": "absolute", "steps": [{"color": "red", "value": null}, {"color": "green", "value": 1}]}
            }
          },
          "gridPos": {"h": 3, "w": 4, "x": 20, "y": 1},
          "id": 6,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "value"},
          "targets": [{"expr": "max(kube_pod_status_phase{namespace=\"downloads\",pod=~\"sabnzbd.*\",phase=\"Running\"})", "legendFormat": "SABnzbd", "refId": "A"}],
          "title": "SABnzbd",
          "type": "stat"
        },
        {
          "datasource": "Prometheus",
          "description": "Cleanuparr pod status",
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "thresholds"},
              "mappings": [
                {"options": {"0": {"color": "red", "index": 1, "text": "Down"}}, "type": "value"},
                {"options": {"1": {"color": "green", "index": 0, "text": "Running"}}, "type": "value"}
              ],
              "thresholds": {"mode": "absolute", "steps": [{"color": "red", "value": null}, {"color": "green", "value": 1}]}
            }
          },
          "gridPos": {"h": 3, "w": 4, "x": 0, "y": 4},
          "id": 7,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "value"},
          "targets": [{"expr": "max(kube_pod_status_phase{namespace=\"media\",pod=~\"cleanuparr.*\",phase=\"Running\"})", "legendFormat": "Cleanuparr", "refId": "A"}],
          "title": "Cleanuparr",
          "type": "stat"
        },
        {
          "datasource": "Prometheus",
          "description": "Huntarr pod status",
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "thresholds"},
              "mappings": [
                {"options": {"0": {"color": "red", "index": 1, "text": "Down"}}, "type": "value"},
                {"options": {"1": {"color": "green", "index": 0, "text": "Running"}}, "type": "value"}
              ],
              "thresholds": {"mode": "absolute", "steps": [{"color": "red", "value": null}, {"color": "green", "value": 1}]}
            }
          },
          "gridPos": {"h": 3, "w": 4, "x": 4, "y": 4},
          "id": 8,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "value"},
          "targets": [{"expr": "max(kube_pod_status_phase{namespace=\"media\",pod=~\"huntarr.*\",phase=\"Running\"})", "legendFormat": "Huntarr", "refId": "A"}],
          "title": "Huntarr",
          "type": "stat"
        },
        {
          "datasource": "Prometheus",
          "description": "Maintainerr pod status",
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "thresholds"},
              "mappings": [
                {"options": {"0": {"color": "red", "index": 1, "text": "Down"}}, "type": "value"},
                {"options": {"1": {"color": "green", "index": 0, "text": "Running"}}, "type": "value"}
              ],
              "thresholds": {"mode": "absolute", "steps": [{"color": "red", "value": null}, {"color": "green", "value": 1}]}
            }
          },
          "gridPos": {"h": 3, "w": 4, "x": 8, "y": 4},
          "id": 9,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "value"},
          "targets": [{"expr": "max(kube_pod_status_phase{namespace=\"media\",pod=~\"maintainerr.*\",phase=\"Running\"})", "legendFormat": "Maintainerr", "refId": "A"}],
          "title": "Maintainerr",
          "type": "stat"
        },
        {
          "datasource": "Prometheus",
          "description": "Wizarr pod status",
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "thresholds"},
              "mappings": [
                {"options": {"0": {"color": "red", "index": 1, "text": "Down"}}, "type": "value"},
                {"options": {"1": {"color": "green", "index": 0, "text": "Running"}}, "type": "value"}
              ],
              "thresholds": {"mode": "absolute", "steps": [{"color": "red", "value": null}, {"color": "green", "value": 1}]}
            }
          },
          "gridPos": {"h": 3, "w": 4, "x": 12, "y": 4},
          "id": 10,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "value"},
          "targets": [{"expr": "max(kube_pod_status_phase{namespace=\"media\",pod=~\"wizarr.*\",phase=\"Running\"})", "legendFormat": "Wizarr", "refId": "A"}],
          "title": "Wizarr",
          "type": "stat"
        },
        {
          "collapsed": false,
          "gridPos": {"h": 1, "w": 24, "x": 0, "y": 7},
          "id": 101,
          "panels": [],
          "title": "Sonarr - TV Series",
          "type": "row"
        },
        {
          "datasource": "Prometheus",
          "description": "Total monitored series",
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"color": "blue", "value": null}]}, "unit": "short"}},
          "gridPos": {"h": 4, "w": 4, "x": 0, "y": 8},
          "id": 10,
          "options": {"colorMode": "value", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "value_and_name"},
          "targets": [{"expr": "max(sonarr_series_total)", "legendFormat": "Series", "refId": "A"}],
          "title": "Total Series",
          "type": "stat"
        },
        {
          "datasource": "Prometheus",
          "description": "Total monitored episodes",
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"color": "blue", "value": null}]}, "unit": "short"}},
          "gridPos": {"h": 4, "w": 4, "x": 4, "y": 8},
          "id": 11,
          "options": {"colorMode": "value", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "value_and_name"},
          "targets": [{"expr": "max(sonarr_episode_total)", "legendFormat": "Episodes", "refId": "A"}],
          "title": "Total Episodes",
          "type": "stat"
        },
        {
          "datasource": "Prometheus",
          "description": "Downloaded episodes",
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}, "unit": "short"}},
          "gridPos": {"h": 4, "w": 4, "x": 8, "y": 8},
          "id": 12,
          "options": {"colorMode": "value", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "value_and_name"},
          "targets": [{"expr": "max(sonarr_episode_downloaded_total)", "legendFormat": "Downloaded", "refId": "A"}],
          "title": "Downloaded",
          "type": "stat"
        },
        {
          "datasource": "Prometheus",
          "description": "Missing episodes",
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "yellow", "value": 10}, {"color": "orange", "value": 50}, {"color": "red", "value": 100}]}, "unit": "short"}},
          "gridPos": {"h": 4, "w": 4, "x": 12, "y": 8},
          "id": 13,
          "options": {"colorMode": "value", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "value_and_name"},
          "targets": [{"expr": "max(sonarr_episode_missing_total)", "legendFormat": "Missing", "refId": "A"}],
          "title": "Missing",
          "type": "stat"
        },
        {
          "datasource": "Prometheus",
          "description": "Total historical events (downloads, failures, imports)",
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"color": "blue", "value": null}]}, "unit": "short"}},
          "gridPos": {"h": 4, "w": 4, "x": 16, "y": 8},
          "id": 14,
          "options": {"colorMode": "value", "graphMode": "area", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "value_and_name"},
          "targets": [{"expr": "max(sonarr_history_total)", "legendFormat": "History", "refId": "A"}],
          "title": "History",
          "type": "stat"
        },
        {
          "datasource": "Prometheus",
          "description": "Download completion percentage",
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "max": 100, "min": 0, "thresholds": {"mode": "absolute", "steps": [{"color": "red", "value": null}, {"color": "yellow", "value": 50}, {"color": "green", "value": 90}]}, "unit": "percent"}},
          "gridPos": {"h": 4, "w": 4, "x": 20, "y": 8},
          "id": 15,
          "options": {"orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "showThresholdLabels": false, "showThresholdMarkers": true},
          "targets": [{"expr": "(max(sonarr_episode_downloaded_total) / (max(sonarr_episode_total) > 0 or vector(1))) * 100", "legendFormat": "Completion", "refId": "A"}],
          "title": "Completion %",
          "type": "gauge"
        },
        {
          "collapsed": false,
          "gridPos": {"h": 1, "w": 24, "x": 0, "y": 12},
          "id": 102,
          "panels": [],
          "title": "Radarr - Movies",
          "type": "row"
        },
        {
          "datasource": "Prometheus",
          "description": "Total monitored movies",
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"color": "blue", "value": null}]}, "unit": "short"}},
          "gridPos": {"h": 4, "w": 6, "x": 0, "y": 13},
          "id": 20,
          "options": {"colorMode": "value", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "value_and_name"},
          "targets": [{"expr": "max(radarr_movie_total)", "legendFormat": "Movies", "refId": "A"}],
          "title": "Total Movies",
          "type": "stat"
        },
        {
          "datasource": "Prometheus",
          "description": "Downloaded movies",
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}, "unit": "short"}},
          "gridPos": {"h": 4, "w": 5, "x": 6, "y": 13},
          "id": 21,
          "options": {"colorMode": "value", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "value_and_name"},
          "targets": [{"expr": "max(radarr_movie_downloaded_total)", "legendFormat": "Downloaded", "refId": "A"}],
          "title": "Downloaded",
          "type": "stat"
        },
        {
          "datasource": "Prometheus",
          "description": "Missing movies",
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "yellow", "value": 5}, {"color": "orange", "value": 20}, {"color": "red", "value": 50}]}, "unit": "short"}},
          "gridPos": {"h": 4, "w": 5, "x": 11, "y": 13},
          "id": 22,
          "options": {"colorMode": "value", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "value_and_name"},
          "targets": [{"expr": "max(radarr_movie_missing_total)", "legendFormat": "Missing", "refId": "A"}],
          "title": "Missing",
          "type": "stat"
        },
        {
          "datasource": "Prometheus",
          "description": "Total historical events (downloads, failures, imports)",
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"color": "blue", "value": null}]}, "unit": "short"}},
          "gridPos": {"h": 4, "w": 4, "x": 16, "y": 13},
          "id": 23,
          "options": {"colorMode": "value", "graphMode": "area", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "value_and_name"},
          "targets": [{"expr": "max(radarr_history_total)", "legendFormat": "History", "refId": "A"}],
          "title": "History",
          "type": "stat"
        },
        {
          "datasource": "Prometheus",
          "description": "Download completion percentage",
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "max": 100, "min": 0, "thresholds": {"mode": "absolute", "steps": [{"color": "red", "value": null}, {"color": "yellow", "value": 50}, {"color": "green", "value": 90}]}, "unit": "percent"}},
          "gridPos": {"h": 4, "w": 4, "x": 20, "y": 13},
          "id": 24,
          "options": {"orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "showThresholdLabels": false, "showThresholdMarkers": true},
          "targets": [{"expr": "(max(radarr_movie_downloaded_total) / (max(radarr_movie_total) > 0 or vector(1))) * 100", "legendFormat": "Completion", "refId": "A"}],
          "title": "Completion %",
          "type": "gauge"
        },
        {
          "collapsed": false,
          "gridPos": {"h": 1, "w": 24, "x": 0, "y": 17},
          "id": 103,
          "panels": [],
          "title": "Prowlarr - Indexers",
          "type": "row"
        },
        {
          "datasource": "Prometheus",
          "description": "Total configured indexers",
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"color": "blue", "value": null}]}, "unit": "short"}},
          "gridPos": {"h": 4, "w": 8, "x": 0, "y": 18},
          "id": 30,
          "options": {"colorMode": "value", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "value_and_name"},
          "targets": [{"expr": "max(prowlarr_indexer_total)", "legendFormat": "Indexers", "refId": "A"}],
          "title": "Total Indexers",
          "type": "stat"
        },
        {
          "datasource": "Prometheus",
          "description": "Total grabs from indexers",
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}, "unit": "short"}},
          "gridPos": {"h": 4, "w": 8, "x": 8, "y": 18},
          "id": 31,
          "options": {"colorMode": "value", "graphMode": "area", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "value_and_name"},
          "targets": [{"expr": "sum(prowlarr_indexer_grabs_total)", "legendFormat": "Total Grabs", "refId": "A"}],
          "title": "Total Grabs",
          "type": "stat"
        },
        {
          "datasource": "Prometheus",
          "description": "Total queries to indexers",
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"color": "purple", "value": null}]}, "unit": "short"}},
          "gridPos": {"h": 4, "w": 8, "x": 16, "y": 18},
          "id": 32,
          "options": {"colorMode": "value", "graphMode": "area", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "value_and_name"},
          "targets": [{"expr": "sum(prowlarr_indexer_queries_total)", "legendFormat": "Total Queries", "refId": "A"}],
          "title": "Total Queries",
          "type": "stat"
        },
        {
          "collapsed": false,
          "gridPos": {"h": 1, "w": 24, "x": 0, "y": 22},
          "id": 104,
          "panels": [],
          "title": "qBittorrent - Torrents",
          "type": "row"
        },
        {
          "datasource": "Prometheus",
          "description": "qBittorrent status: 0=Idle, 1=Seeding, 2=Downloading",
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "thresholds"},
              "mappings": [
                {"options": {"0": {"color": "blue", "index": 0, "text": "Idle"}}, "type": "value"},
                {"options": {"1": {"color": "orange", "index": 1, "text": "Seeding"}}, "type": "value"},
                {"options": {"2": {"color": "green", "index": 2, "text": "Downloading"}}, "type": "value"}
              ],
              "thresholds": {"mode": "absolute", "steps": [{"color": "blue", "value": null}, {"color": "orange", "value": 1}, {"color": "green", "value": 2}]}
            }
          },
          "gridPos": {"h": 4, "w": 4, "x": 0, "y": 23},
          "id": 40,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "value"},
          "targets": [{"expr": "((qbittorrent_global_download_speed_bytes > 0) * 2) + (((qbittorrent_global_upload_speed_bytes > 0) * (qbittorrent_global_download_speed_bytes == 0)) * 1) or vector(0)", "legendFormat": "Status", "refId": "A"}],
          "title": "Status",
          "type": "stat"
        },
        {
          "datasource": "Prometheus",
          "description": "Current download speed",
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}, "unit": "Bps"}},
          "gridPos": {"h": 4, "w": 4, "x": 4, "y": 23},
          "id": 41,
          "options": {"colorMode": "value", "graphMode": "area", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "value_and_name"},
          "targets": [{"expr": "max(qbittorrent_global_download_speed_bytes)", "legendFormat": "Download", "refId": "A"}],
          "title": "Download Speed",
          "type": "stat"
        },
        {
          "datasource": "Prometheus",
          "description": "Current upload speed",
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"color": "orange", "value": null}]}, "unit": "Bps"}},
          "gridPos": {"h": 4, "w": 4, "x": 8, "y": 23},
          "id": 42,
          "options": {"colorMode": "value", "graphMode": "area", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "value_and_name"},
          "targets": [{"expr": "max(qbittorrent_global_upload_speed_bytes)", "legendFormat": "Upload", "refId": "A"}],
          "title": "Upload Speed",
          "type": "stat"
        },
        {
          "datasource": "Prometheus",
          "description": "Total downloaded all time",
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}, "unit": "bytes"}},
          "gridPos": {"h": 4, "w": 4, "x": 12, "y": 23},
          "id": 43,
          "options": {"colorMode": "value", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "value_and_name"},
          "targets": [{"expr": "max(qbittorrent_global_alltime_downloaded_bytes)", "legendFormat": "Downloaded", "refId": "A"}],
          "title": "Total Downloaded",
          "type": "stat"
        },
        {
          "datasource": "Prometheus",
          "description": "Total uploaded all time",
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"color": "orange", "value": null}]}, "unit": "bytes"}},
          "gridPos": {"h": 4, "w": 4, "x": 16, "y": 23},
          "id": 44,
          "options": {"colorMode": "value", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "value_and_name"},
          "targets": [{"expr": "max(qbittorrent_global_alltime_uploaded_bytes)", "legendFormat": "Uploaded", "refId": "A"}],
          "title": "Total Uploaded",
          "type": "stat"
        },
        {
          "datasource": "Prometheus",
          "description": "Overall share ratio",
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"color": "red", "value": null}, {"color": "yellow", "value": 0.5}, {"color": "green", "value": 1}]}, "unit": "short", "decimals": 2}},
          "gridPos": {"h": 4, "w": 4, "x": 20, "y": 23},
          "id": 45,
          "options": {"colorMode": "value", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "value_and_name"},
          "targets": [{"expr": "max(qbittorrent_global_alltime_uploaded_bytes) / (max(qbittorrent_global_alltime_downloaded_bytes) > 0 or vector(1))", "legendFormat": "Ratio", "refId": "A"}],
          "title": "Ratio",
          "type": "stat"
        },
        {
          "collapsed": false,
          "gridPos": {"h": 1, "w": 24, "x": 0, "y": 27},
          "id": 105,
          "panels": [],
          "title": "SABnzbd - Usenet",
          "type": "row"
        },
        {
          "datasource": "Prometheus",
          "description": "SABnzbd status: 0=Unknown, 1=Idle, 2=Paused, 3=Downloading",
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "thresholds"},
              "mappings": [
                {"options": {"0": {"color": "gray", "index": 0, "text": "Unknown"}}, "type": "value"},
                {"options": {"1": {"color": "blue", "index": 1, "text": "Idle"}}, "type": "value"},
                {"options": {"2": {"color": "yellow", "index": 2, "text": "Paused"}}, "type": "value"},
                {"options": {"3": {"color": "green", "index": 3, "text": "Downloading"}}, "type": "value"}
              ],
              "thresholds": {"mode": "absolute", "steps": [{"color": "gray", "value": null}, {"color": "green", "value": 3}]}
            }
          },
          "gridPos": {"h": 4, "w": 4, "x": 0, "y": 28},
          "id": 50,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "value"},
          "targets": [{"expr": "max(sabnzbd_status)", "legendFormat": "Status", "refId": "A"}],
          "title": "Status",
          "type": "stat"
        },
        {
          "datasource": "Prometheus",
          "description": "Number of items in download queue",
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "yellow", "value": 5}, {"color": "orange", "value": 15}, {"color": "red", "value": 30}]}, "unit": "short"}},
          "gridPos": {"h": 4, "w": 4, "x": 4, "y": 28},
          "id": 51,
          "options": {"colorMode": "value", "graphMode": "area", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "value_and_name"},
          "targets": [{"expr": "max(sabnzbd_queue_length)", "legendFormat": "Items", "refId": "A"}],
          "title": "Queue Items",
          "type": "stat"
        },
        {
          "datasource": "Prometheus",
          "description": "Current download speed",
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "yellow", "value": 10000000}, {"color": "green", "value": 30000000}]}, "unit": "Bps"}},
          "gridPos": {"h": 4, "w": 4, "x": 8, "y": 28},
          "id": 52,
          "options": {"colorMode": "value", "graphMode": "area", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "value_and_name"},
          "targets": [{"expr": "max(sabnzbd_speed_bps)", "legendFormat": "Speed", "refId": "A"}],
          "title": "Download Speed",
          "type": "stat"
        },
        {
          "datasource": "Prometheus",
          "description": "Total data remaining to download in queue",
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"color": "blue", "value": null}]}, "unit": "bytes"}},
          "gridPos": {"h": 4, "w": 4, "x": 12, "y": 28},
          "id": 53,
          "options": {"colorMode": "value", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "value_and_name"},
          "targets": [{"expr": "max(sabnzbd_remaining_bytes)", "legendFormat": "Remaining", "refId": "A"}],
          "title": "Queue Size",
          "type": "stat"
        },
        {
          "datasource": "Prometheus",
          "description": "Estimated time until queue completion",
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "yellow", "value": 3600}, {"color": "orange", "value": 7200}]}, "unit": "s"}},
          "gridPos": {"h": 4, "w": 4, "x": 16, "y": 28},
          "id": 54,
          "options": {"colorMode": "value", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "value_and_name"},
          "targets": [{"expr": "max(sabnzbd_time_estimate_seconds)", "legendFormat": "ETA", "refId": "A"}],
          "title": "Time Remaining",
          "type": "stat"
        },
        {
          "datasource": "Prometheus",
          "description": "Disk space usage percentage",
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "max": 100, "min": 0, "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "yellow", "value": 70}, {"color": "orange", "value": 85}, {"color": "red", "value": 95}]}, "unit": "percent"}},
          "gridPos": {"h": 4, "w": 4, "x": 20, "y": 28},
          "id": 55,
          "options": {"orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "showThresholdLabels": false, "showThresholdMarkers": true},
          "targets": [{"expr": "(max(sabnzbd_disk_used_bytes) / max(sabnzbd_disk_total_bytes)) * 100", "legendFormat": "Used", "refId": "A"}],
          "title": "Disk Usage",
          "type": "gauge"
        },
        {
          "collapsed": false,
          "gridPos": {"h": 1, "w": 24, "x": 0, "y": 32},
          "id": 108,
          "panels": [],
          "title": "VPN Status",
          "type": "row"
        },
        {
          "datasource": "Prometheus",
          "description": "Prowlarr VPN status - confirms traffic is routed through VPN",
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "thresholds"},
              "mappings": [
                {"options": {"0": {"color": "red", "index": 1, "text": "Down"}}, "type": "value"},
                {"options": {"1": {"color": "green", "index": 0, "text": "Running"}}, "type": "value"}
              ],
              "noValue": "Down",
              "thresholds": {"mode": "absolute", "steps": [{"color": "red", "value": null}, {"color": "green", "value": 1}]}
            }
          },
          "gridPos": {"h": 4, "w": 8, "x": 0, "y": 33},
          "id": 80,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "value"},
          "targets": [{"expr": "max(gluetun_vpn_infos{job=~\".*prowlarr.*\"}) or vector(0)", "legendFormat": "Prowlarr VPN", "refId": "A"}],
          "title": "Prowlarr VPN",
          "type": "stat"
        },
        {
          "datasource": "Prometheus",
          "description": "qBittorrent VPN status - confirms traffic is routed through VPN",
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "thresholds"},
              "mappings": [
                {"options": {"0": {"color": "red", "index": 1, "text": "Down"}}, "type": "value"},
                {"options": {"1": {"color": "green", "index": 0, "text": "Running"}}, "type": "value"}
              ],
              "noValue": "Down",
              "thresholds": {"mode": "absolute", "steps": [{"color": "red", "value": null}, {"color": "green", "value": 1}]}
            }
          },
          "gridPos": {"h": 4, "w": 8, "x": 8, "y": 33},
          "id": 81,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "value"},
          "targets": [{"expr": "max(gluetun_vpn_infos{job=~\".*qbittorrent.*\"}) or vector(0)", "legendFormat": "qBittorrent VPN", "refId": "A"}],
          "title": "qBittorrent VPN",
          "type": "stat"
        },
        {
          "datasource": "Prometheus",
          "description": "SABnzbd VPN status - confirms traffic is routed through VPN",
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "thresholds"},
              "mappings": [
                {"options": {"0": {"color": "red", "index": 1, "text": "Down"}}, "type": "value"},
                {"options": {"1": {"color": "green", "index": 0, "text": "Running"}}, "type": "value"}
              ],
              "noValue": "Down",
              "thresholds": {"mode": "absolute", "steps": [{"color": "red", "value": null}, {"color": "green", "value": 1}]}
            }
          },
          "gridPos": {"h": 4, "w": 8, "x": 16, "y": 33},
          "id": 82,
          "options": {"colorMode": "background", "graphMode": "none", "justifyMode": "center", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "textMode": "value"},
          "targets": [{"expr": "max(gluetun_vpn_infos{job=~\".*sabnzbd.*\"}) or vector(0)", "legendFormat": "SABnzbd VPN", "refId": "A"}],
          "title": "SABnzbd VPN",
          "type": "stat"
        },
        {
          "datasource": "Prometheus",
          "description": "VPN connection status and location details for all apps",
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "thresholds"},
              "custom": {"align": "auto", "cellOptions": {"type": "auto"}, "inspect": false},
              "mappings": [],
              "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}]}
            },
            "overrides": [
              {"matcher": {"id": "byName", "options": "App"}, "properties": [{"id": "custom.width", "value": 120}]},
              {"matcher": {"id": "byName", "options": "IP"}, "properties": [{"id": "custom.width", "value": 140}]},
              {"matcher": {"id": "byName", "options": "Country"}, "properties": [{"id": "custom.width", "value": 150}]},
              {"matcher": {"id": "byName", "options": "City"}, "properties": [{"id": "custom.width", "value": 150}]}
            ]
          },
          "gridPos": {"h": 4, "w": 24, "x": 0, "y": 37},
          "id": 83,
          "options": {"cellHeight": "sm", "footer": {"countRows": false, "fields": "", "reducer": ["sum"], "show": false}, "showHeader": true},
          "targets": [{"expr": "gluetun_vpn_infos", "format": "table", "instant": true, "legendFormat": "", "refId": "A"}],
          "title": "VPN Details",
          "transformations": [
            {"id": "organize", "options": {"excludeByName": {"Time": true, "Value": true, "__name__": true, "instance": true, "endpoint": true, "namespace": true, "pod": true, "service": true}, "indexByName": {}, "renameByName": {"country": "Country", "ip": "IP", "job": "App", "city": "City"}}}
          ],
          "type": "table"
        },
        {
          "collapsed": false,
          "gridPos": {"h": 1, "w": 24, "x": 0, "y": 41},
          "id": 106,
          "panels": [],
          "title": "Plex - Media Server",
          "type": "row"
        },
        {
          "datasource": "Prometheus",
          "description": "Plex CPU usage over time",
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "palette-classic"},
              "custom": {"axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"tooltip": false, "viz": false, "legend": false}, "lineInterpolation": "smooth", "lineWidth": 2, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "never", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}},
              "mappings": [],
              "thresholds": {"mode": "absolute", "steps": [{"color": "transparent", "value": null}]},
              "unit": "short"
            }
          },
          "gridPos": {"h": 7, "w": 12, "x": 0, "y": 42},
          "id": 60,
          "options": {"legend": {"calcs": ["mean", "max", "current"], "displayMode": "table", "placement": "bottom", "showLegend": true}, "tooltip": {"mode": "multi", "sort": "desc"}},
          "targets": [{"expr": "sum(rate(container_cpu_usage_seconds_total{namespace=\"media\",pod=~\"plex.*\",container!=\"\",container!=\"POD\"}[5m]))", "legendFormat": "Plex CPU Cores", "refId": "A"}],
          "title": "Plex CPU Usage",
          "type": "timeseries"
        },
        {
          "datasource": "Prometheus",
          "description": "Plex memory usage over time",
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "palette-classic"},
              "custom": {"axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"tooltip": false, "viz": false, "legend": false}, "lineInterpolation": "smooth", "lineWidth": 2, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "never", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}},
              "mappings": [],
              "thresholds": {"mode": "absolute", "steps": [{"color": "transparent", "value": null}]},
              "unit": "bytes"
            }
          },
          "gridPos": {"h": 7, "w": 12, "x": 12, "y": 42},
          "id": 61,
          "options": {"legend": {"calcs": ["mean", "max", "current"], "displayMode": "table", "placement": "bottom", "showLegend": true}, "tooltip": {"mode": "multi", "sort": "desc"}},
          "targets": [{"expr": "sum(container_memory_working_set_bytes{namespace=\"media\",pod=~\"plex.*\",container!=\"\",container!=\"POD\"})", "legendFormat": "Plex Memory", "refId": "A"}],
          "title": "Plex Memory Usage",
          "type": "timeseries"
        },
        {
          "datasource": "Prometheus",
          "description": "Plex network I/O",
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "palette-classic"},
              "custom": {"axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"tooltip": false, "viz": false, "legend": false}, "lineInterpolation": "smooth", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "never", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}},
              "mappings": [],
              "thresholds": {"mode": "absolute", "steps": [{"color": "transparent", "value": null}]},
              "unit": "Bps"
            }
          },
          "gridPos": {"h": 7, "w": 24, "x": 0, "y": 49},
          "id": 62,
          "options": {"legend": {"calcs": ["mean", "max"], "displayMode": "table", "placement": "bottom", "showLegend": true}, "tooltip": {"mode": "multi", "sort": "desc"}},
          "targets": [
            {"expr": "sum(rate(container_network_receive_bytes_total{namespace=\"media\",pod=~\"plex.*\"}[5m]))", "legendFormat": "Receive", "refId": "A"},
            {"expr": "sum(rate(container_network_transmit_bytes_total{namespace=\"media\",pod=~\"plex.*\"}[5m]))", "legendFormat": "Transmit", "refId": "B"}
          ],
          "title": "Plex Network I/O",
          "type": "timeseries"
        },
        {
          "collapsed": false,
          "gridPos": {"h": 1, "w": 24, "x": 0, "y": 56},
          "id": 107,
          "panels": [],
          "title": "Download Speeds Over Time",
          "type": "row"
        },
        {
          "datasource": "Prometheus",
          "description": "qBittorrent and SABnzbd download speeds over time",
          "fieldConfig": {
            "defaults": {
              "color": {"mode": "palette-classic"},
              "custom": {"axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"tooltip": false, "viz": false, "legend": false}, "lineInterpolation": "smooth", "lineWidth": 2, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "never", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}},
              "mappings": [],
              "thresholds": {"mode": "absolute", "steps": [{"color": "transparent", "value": null}]},
              "unit": "Bps"
            }
          },
          "gridPos": {"h": 8, "w": 24, "x": 0, "y": 57},
          "id": 70,
          "options": {"legend": {"calcs": ["mean", "max", "current"], "displayMode": "table", "placement": "bottom", "showLegend": true}, "tooltip": {"mode": "multi", "sort": "desc"}},
          "targets": [
            {"expr": "max(qbittorrent_global_download_speed_bytes)", "legendFormat": "qBittorrent Download", "refId": "A"},
            {"expr": "max(qbittorrent_global_upload_speed_bytes)", "legendFormat": "qBittorrent Upload", "refId": "B"},
            {"expr": "max(sabnzbd_speed_bps)", "legendFormat": "SABnzbd Download", "refId": "C"}
          ],
          "title": "Download/Upload Speeds",
          "type": "timeseries"
        }
      ],
      "refresh": "1m",
      "schemaVersion": 38,
      "tags": ["media", "plex", "sonarr", "radarr", "prowlarr", "qbittorrent", "sabnzbd", "cleanuparr", "huntarr", "maintainerr", "wizarr", "vpn"],
      "templating": {"list": []},
      "time": {"from": "now-6h", "to": "now"},
      "timepicker": {},
      "timezone": "browser",
      "title": "Media Stack",
      "uid": "media-stack-monitoring",
      "version": 1
    }
